/**
 * Entropia 3D — Параметри світу та простору.
 *
 * Геометричні та популяційні константи віртуального середовища.
 *
 * @module shared/config/world
 */

import type { WorldConfig } from '../types';

// ============================================================================
// ГЕОМЕТРИЧНІ ПАРАМЕТРИ
// ============================================================================

/** Лінійна розмірність кубічного домену (в умовних одиницях). */
export const WORLD_SIZE = 400;

/** Розмір комірки просторової сітки для O(1) пошуку сусідів. */
export const CELL_SIZE = 80;

/** Максимальна кількість агентів для підтримки 60 FPS. */
export const MAX_TOTAL_ORGANISMS = 400;

// ============================================================================
// ПОЧАТКОВІ ПОПУЛЯЦІЇ
// ============================================================================

/** Початкова кількість травоїдних. */
export const INITIAL_PREY = 80;

/** Початкова кількість хижаків. */
export const INITIAL_PREDATOR = 8;

// ============================================================================
// РЕСУРСНА БАЗА
// ============================================================================

/** Максимальна кількість їжі в світі. */
export const MAX_FOOD = 300;

/** Швидкість генерації їжі за такт. */
export const FOOD_SPAWN_RATE = 0.5;

/** Енергетична цінність одиниці їжі. */
export const FOOD_ENERGY_VALUE = 40;

// ============================================================================
// ФАБРИКА КОНФІГУРАЦІЇ СВІТУ
// ============================================================================

/**
 * Генерує конфігурацію світу з масштабуванням.
 *
 * @param scale - Масштабний коефіцієнт (за замовчуванням 1.0).
 * @returns Конфігурація світу з відповідним масштабуванням.
 */
export function createWorldConfig(scale: number = 1.0): WorldConfig {
  const volumeScale = Math.pow(scale, 3);

  return {
    WORLD_SIZE: WORLD_SIZE * scale,
    MAX_TOTAL_ORGANISMS: Math.floor(MAX_TOTAL_ORGANISMS * volumeScale),
    INITIAL_PREY: Math.floor(INITIAL_PREY * volumeScale),
    INITIAL_PREDATOR: Math.floor(INITIAL_PREDATOR * volumeScale),
    MAX_FOOD: Math.floor(MAX_FOOD * volumeScale),
    FOOD_SPAWN_RATE: FOOD_SPAWN_RATE * volumeScale,
  };
}
